{% extends 'search/base.html' %}

{% block content %}
<title>PurBeurre - Recherche</title>

<!-- Masthead -->
<header class="masthead">
    <div class="container h-100">
        <div class="row h-100 align-items-center justify-content-center text-center">
            <div class="col-lg-10 align-self-end">
                <h1 class="text-uppercase text-white font-weight-bold">Du gras oui, mais de qualité !</h1>
                <hr class="divider my-4">
            </div>
            <div class="col-lg-8 align-self-baseline">
                <form class="form-inline col-lg-10 col-xs-10 align-self-baseline mid_find" action="{% url 'result' %}"
                      method="POST">
                    {% csrf_token %}
                    {% if not error_result %}
                    <div class="form-inline pull-right mid_find">
                        {% elif error_result %}
                        <div class="form-inline pull-right mid_find error_result">
                            {% endif %}
                            <div class="container form-group {% if form.userFood.errors %}has-warning has-feedback{% endif %}">
                                {% if not error_result %}
                                <img class="img_res" src="{{ img_result }}">
                                {% endif %}
                                <div class="place_find_style">
                                    <label for="{{ form.userFood.id_for_label }}">
                                        {{ form_food.food }}
                                        <p class="product_result_res">{{ name_result }}</p>
                                        <button class="btn btn-primary btn-xs js-scroll-trigger">Recherche</button>
                                </div>
                            </div>
                </form>
            </div>

            <div id="error_result">
                {% if error_result %}
                <p>{{ error_result }}</p>
                {% endif %}
            </div>

            {% if not error_result %}
            <div class="pagination">
                <span class="step-links">
                    {% if nb_page.has_previous %}
                        <a href="?page=1">&laquo; first</a>
                        <a href="?page={{ nb_page.previous_page_number }}">previous</a>
                    {% endif %}

                    <span class="current">
                        Page {{ nb_page.number }} of {{ nb_page.paginator.num_pages }}.
                    </span>

                    {% if nb_page.has_next %}
                        <a href="?page={{ nb_page.next_page_number }}">next</a>
                        <a href="?page={{ nb_page.paginator.num_pages }}">last &raquo;</a>
                    {% endif %}
                </span>
            </div>
            {% endif %}
        </div>
    </div>
</header>

{% if not error_result %}
<center><h3 id="res_h3">Vous pouvez remplacer cet aliment par:</h3></center>

<div class="container row container_result wrap" id="products_result">
    {% for product in product_result %}
    <div class="result col-md-4">
        <div class="product_result">{{ product.product_name }}</div>

        <div class="img_container">
            <div class="nutrition_grades">{{ product.nutrition_grades }}</div>
            <a href="/search/description.html?product={{ product.product_name }}"><img
                    src="{{ product.image_url }}"
                    class="img_result"></a>
            {% if save_food != product.product_name %}
            <div class="button_save">
                <button class="favorite styled button_save_style"
                        type="button" id="check_saveFood" value="{{ product.product_name }}"><br/>
                </button>
                <div class="style_save_c">Enregistrer</div>
            </div>
            {% endif %}
            {% if save_food == product.product_name %}
            <div>
                <p><i class="fa fa-floppy-o" id="style_floppy" aria-hidden="true"></i>Enregistré</p>
            </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

{% endblock %}

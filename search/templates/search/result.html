{% extends 'search/base.html' %}

{% block content %}
<!-- Masthead -->
<header class="masthead">
    <div class="container h-100">
        <div class="row h-100 align-items-center justify-content-center text-center">
            <div class="col-lg-10 align-self-end">
                <h1 class="text-uppercase text-white font-weight-bold">Du gras oui, mais de qualit√© !</h1>
                <hr class="divider my-4">
            </div>
            <div class="col-lg-8 align-self-baseline">

                <form class="form-inline col-lg-10 col-xs-10 align-self-baseline" action="{% url 'result' %}"
                      method="POST">
                    {% csrf_token %}
                    <div class="form-inline pull-right mid_find">

                        <div id="query_search"
                             class="form-group {% if form.userFood.errors %}has-warning has-feedback{% endif %}">
                            <label for="{{ form.userFood.id_for_label }}">
                                {{ form_food.food }}
                                <!--{{ name_result }}
                                {{ img_result }}-->
                        </div>
                        <button class="btn btn-primary btn-xs js-scroll-trigger">Recherche</button>
                    </div>
                </form>
            </div>

            <div>
                {% if error_result %}
                    <p>{{ error_result }}</p>
                {% endif %}
            </div>

            <div class="pagination">
                <span class="step-links">
                    {% if nb_page.has_previous %}
                        <a href="?page=1">&laquo; first</a>
                        <a href="?page={{ nb_page.previous_page_number }}">previous</a>
                    {% endif %}

                    <span class="current">
                        Page {{ nb_page.number }} of {{ nb_page.paginator.num_pages }}.
                    </span>

                    {% if nb_page.has_next %}
                        <a href="?page={{ nb_page.next_page_number }}">next</a>
                        <a href="?page={{ nb_page.paginator.num_pages }}">last &raquo;</a>
                    {% endif %}
                </span>
            </div>
        </div>
    </div>
</header>

<div class="container row container_result wrap" id="products_result">
    {% for product in product_result %}
    <div class="result col-md-3">
        <div class="product_result">{{ product.product_name }}</div>

        <div class="img_container">
            <div class="nutrition_grades">{{ product.nutrition_grades }}</div>
            <a href="/search/description.html?product={{ product.product_name }}"><img
                src="{{ product.image_url }}"
                class="img_result"></a>
        </div>
        <a href="/search/favorites.html?product={{ product.product_name }}">Ajouter au favoris</a>
    </div>
    {% endfor %}
</div>

{% endblock %}
